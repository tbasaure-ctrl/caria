===========================================
COMANDOS CORRECTOS - EJECUTAR EN ORDEN
===========================================

IMPORTANTE: Ejecuta estos comandos COMPLETOS, uno por uno

===========================================
PASO 1: Configurar proyecto y region
===========================================

gcloud config set project caria-backend
gcloud config set run/region us-central1

===========================================
PASO 2: Crear repositorio Artifact Registry
===========================================

gcloud artifacts repositories create caria-api-repo --repository-format=docker --location=us-central1 --description="Caria API Docker images" --project=caria-backend

===========================================
PASO 3: Configurar autenticacion Docker
===========================================

gcloud auth configure-docker us-central1-docker.pkg.dev

===========================================
PASO 4: Construir y subir imagen
===========================================

cd C:\key\wise_adviser_cursor_context\notebooks
gcloud builds submit --tag us-central1-docker.pkg.dev/caria-backend/caria-api-repo/caria-api:latest

===========================================
PASO 5: Desplegar a Cloud Run
===========================================

gcloud run deploy caria-api --image us-central1-docker.pkg.dev/caria-backend/caria-api-repo/caria-api:latest --platform managed --region us-central1 --allow-unauthenticated --memory 2Gi --cpu 2 --timeout 300 --max-instances 10 --set-env-vars "PORT=8080,RETRIEVAL_PROVIDER=gemini,RETRIEVAL_EMBEDDING_DIM=768" --set-secrets "GEMINI_API_KEY=gemini-api-key:latest" --add-cloudsql-instances caria-backend:us-central1:caria-db --set-env-vars "DATABASE_URL=postgresql://postgres:Theolucas7@/caria?host=/cloudsql/caria-backend:us-central1:caria-db,CORS_ORIGINS=https://caria-git-main-tomas-projects-70a0592d.vercel.app"

===========================================
PASO 6: Obtener URL del servicio
===========================================

gcloud run services describe caria-api --region=us-central1 --format="value(status.url)"

===========================================
NOTAS:
===========================================

- El servicio se llama: caria-api (COMPLETO)
- La region es: us-central1
- El proyecto es: caria-backend
- Si algo falla, revisa los logs con: gcloud run services logs read caria-api --region=us-central1 --limit=50

