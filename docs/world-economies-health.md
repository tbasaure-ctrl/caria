# World Economies Health Monitor

This component visualizes the macroeconomic health of major economies using a 3D globe interface.

## Architecture

1.  **Data Source**: `public/data/world_economies.json`
    *   This JSON file is generated by a Python script: `scripts/fetch_world_economies.py`.
    *   The script is designed to fetch data from public APIs (FRED, World Bank) but currently falls back to synthetic data generation if API keys are missing.

2.  **Frontend Component**: `components/widgets/WorldEconomiesHealth.tsx`
    *   Uses `react-plotly.js` for the 3D globe.
    *   Renders countries as "glowing orbs" using `scattergeo` traces.
    *   Visual properties (color, size, opacity) are driven by the `CountryState` data model.

## Data Model

The core data structure is `CountryState` (defined in `types/worldEconomies.ts`):

```typescript
interface CountryState {
  isoCode: string;
  name: string;
  cyclePhase: 'expansion' | 'slowdown' | 'recession' | 'recovery';
  stressLevel: number; // 0-100
  structuralRisk: number; // 0-100
  externalVulnerability: number; // 0-100
  // ... other metrics
}
```

## How to Extend

### Adding New Countries
1.  Open `scripts/fetch_world_economies.py`.
2.  Add the country to the `COUNTRIES` list with its ISO code and Lat/Lon coordinates.
3.  Run `python scripts/fetch_world_economies.py` to regenerate the JSON.

### Using Real Data
1.  Obtain a FRED API Key (free from St. Louis Fed).
2.  Set the environment variable `FRED_API_KEY`.
3.  Update `fetch_real_data()` in `scripts/fetch_world_economies.py` to implement the actual API calls using `pandas_datareader` or `requests`.
    *   Example: Fetch Industrial Production for Cycle Phase.
    *   Example: Fetch CPI for Inflation.

### Modifying Scoring Logic
1.  Edit `scripts/fetch_world_economies.py`.
2.  Modify the logic inside `generate_synthetic_data` (or your real data fetcher) to change how `stressLevel`, `structuralRisk`, etc., are calculated.
3.  Regenerate the data.

### Visual Customization
1.  Edit `components/widgets/WorldEconomiesHealth.tsx`.
2.  Modify `orbTrace` or `haloTrace` to change colors, sizes, or add new visual layers.
